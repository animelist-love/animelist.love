function C(){return{onFetch:e=>{e.fetchFn=()=>{var n,i,F,N,$,q;const f=(n=e.fetchOptions)==null||(i=n.meta)==null?void 0:i.refetchPage,u=(F=e.fetchOptions)==null||(N=F.meta)==null?void 0:N.fetchMore,g=u==null?void 0:u.pageParam,b=(u==null?void 0:u.direction)==="forward",_=(u==null?void 0:u.direction)==="backward",a=(($=e.state.data)==null?void 0:$.pages)||[],P=((q=e.state.data)==null?void 0:q.pageParams)||[];let c=P,m=!1;const w=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{var o;if((o=e.signal)!=null&&o.aborted)m=!0;else{var r;(r=e.signal)==null||r.addEventListener("abort",()=>{m=!0})}return e.signal}})},x=e.options.queryFn||(()=>Promise.reject("Missing queryFn")),h=(t,o,r,s)=>(c=s?[o,...c]:[...c,o],s?[r,...t]:[...t,r]),d=(t,o,r,s)=>{if(m)return Promise.reject("Cancelled");if(typeof r>"u"&&!o&&t.length)return Promise.resolve(t);const v={queryKey:e.queryKey,pageParam:r,meta:e.options.meta};w(v);const y=x(v);return Promise.resolve(y).then(A=>h(t,r,A,s))};let l;if(!a.length)l=d([]);else if(b){const t=typeof g<"u",o=t?g:p(e.options,a);l=d(a,t,o)}else if(_){const t=typeof g<"u",o=t?g:O(e.options,a);l=d(a,t,o,!0)}else{c=[];const t=typeof e.options.getNextPageParam>"u";l=(f&&a[0]?f(a[0],0,a):!0)?d([],t,P[0]):Promise.resolve(h([],P[0],a[0]));for(let r=1;r<a.length;r++)l=l.then(s=>{if(f&&a[r]?f(a[r],r,a):!0){const y=t?P[r]:p(e.options,s);return d(s,t,y)}return Promise.resolve(h(s,P[r],a[r]))})}return l.then(t=>({pages:t,pageParams:c}))}}}}function p(e,n){return e.getNextPageParam==null?void 0:e.getNextPageParam(n[n.length-1],n)}function O(e,n){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(n[0],n)}function K(e,n){if(e.getNextPageParam&&Array.isArray(n)){const i=p(e,n);return typeof i<"u"&&i!==null&&i!==!1}}function k(e,n){if(e.getPreviousPageParam&&Array.isArray(n)){const i=O(e,n);return typeof i<"u"&&i!==null&&i!==!1}}export{k as a,K as h,C as i};
